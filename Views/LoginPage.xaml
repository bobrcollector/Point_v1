<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Point_v1.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:Point_v1.Converters"
             Title="Ð’Ñ…Ð¾Ð´"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}">

    <ScrollView>
        <VerticalStackLayout Spacing="0" VerticalOptions="Center" Padding="30">

            <!-- Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <VerticalStackLayout Spacing="15" Margin="0,40,0,40" HorizontalOptions="Center">
                <Label Text="ðŸ‘‹" 
                       FontSize="48"
                       HorizontalOptions="Center"/>

                <Label Text="Ð¡ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸ÐµÐ¼!" 
                       Style="{StaticResource Heading1}"
                       HorizontalOptions="Center"
                       Margin="0"/>

                <Label Text="Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² ÑÐ²Ð¾Ð¹ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚" 
                       FontSize="16" 
                       TextColor="{AppThemeBinding Light=Gray, Dark=#A0A0A0}"
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>

            <!-- Ð¤Ð¾Ñ€Ð¼Ð° Ð²Ñ…Ð¾Ð´Ð° -->
            <VerticalStackLayout Spacing="16">

                <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð± ÑƒÑÐ¿ÐµÑ…Ðµ -->
                <Label Text="{Binding SuccessMessage}" 
                       IsVisible="{Binding SuccessMessage, Converter={converters:IsNotNullOrEmptyConverter}}"
                       TextColor="#2E7D32" 
                       FontSize="14"
                       HorizontalOptions="Center"
                       Padding="15,10"
                       HorizontalTextAlignment="Center"/>

                <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ… -->
                <Label Text="{Binding ErrorMessage}" 
                       IsVisible="{Binding ErrorMessage, Converter={converters:IsNotNullOrEmptyConverter}}"
                       TextColor="#D32F2F" 
                       FontSize="14"
                       HorizontalOptions="Center"
                       Padding="15,10"
                       HorizontalTextAlignment="Center"/>

                <!-- Email -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Email" 
                           Style="{StaticResource FormLabel}"/>
                    <Entry Placeholder="your@email.com" 
                           Text="{Binding Email}"
                           Keyboard="Email"/>
                </VerticalStackLayout>

                <!-- ÐŸÐ°Ñ€Ð¾Ð»ÑŒ -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ" 
                           Style="{StaticResource FormLabel}"/>
                    <Entry Placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ" 
                           Text="{Binding Password}"
                           IsPassword="True"/>
                </VerticalStackLayout>

                <!-- Ð—Ð°Ð±Ñ‹Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ? -->
                <Label Text="Ð—Ð°Ð±Ñ‹Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ?" 
                       FontSize="14"
                       TextColor="#512BD4"
                       HorizontalOptions="End"
                       Margin="0,8,0,0">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnForgotPasswordTapped"/>
                    </Label.GestureRecognizers>
                </Label>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° -->
                <Button Text="Ð’Ð¾Ð¹Ñ‚Ð¸" 
                        Command="{Binding LoginCommand}"
                        Margin="0,12,0,0"/>

                <!-- Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ -->
                <Grid VerticalOptions="Center" Margin="0,16">
                    <BoxView HeightRequest="1" 
                             BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#444}"/>
                    <Label Text="Ð¸Ð»Ð¸" 
                           BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
                           Padding="10,0"
                           FontSize="14"
                           TextColor="Gray"
                           HorizontalOptions="Center"/>
                </Grid>

                <!-- ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ Ðº Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ -->
                <Button Text="Ð—Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ" 
                        Command="{Binding GoToRegisterPageCommand}"
                        Style="{StaticResource SecondaryButton}"/>

            </VerticalStackLayout>

            <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
            <ActivityIndicator IsVisible="{Binding IsBusy}" 
                             IsRunning="{Binding IsBusy}"
                             Color="#512BD4"
                             HorizontalOptions="Center"
                             VerticalOptions="End"
                             HeightRequest="50"
                             Margin="0,30,0,0"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>