<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Point_v1.Views.FilterPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Фильтры"
             BackgroundColor="{AppThemeBinding Light=#F8F9FA, Dark=#1C1C1E}">

    <ScrollView>
        <VerticalStackLayout Spacing="0" Padding="0">

            <!-- Шапка -->
            <Frame BackgroundColor="#512BD4"
                   Padding="20,60,20,20"
                   CornerRadius="0"
                   HasShadow="True">
                <Grid ColumnDefinitions="Auto,*,Auto">
                    <Button Grid.Column="0"
                            Text="✕"
                            Command="{Binding CloseCommand}"
                            BackgroundColor="Transparent"
                            TextColor="White"
                            FontSize="18"
                            WidthRequest="40"
                            HeightRequest="40"/>

                    <Label Grid.Column="1"
                           Text="Фильтры событий"
                           TextColor="White"
                           FontSize="20"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Основной контент -->
            <VerticalStackLayout Spacing="20" Padding="20" Margin="0,10,0,0">

                <!-- Поиск -->
                <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#2C2C2E}"
                       Padding="15"
                       CornerRadius="12"
                       HasShadow="True">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Поиск" 
                               FontSize="16" 
                               FontAttributes="Bold"/>
                        <Entry Placeholder="Введите текст для поиска..."
                               Text="{Binding SearchText}"
                               BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#3C3C3E}"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}"
                               HeightRequest="45"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Категория -->
                <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#2C2C2E}"
                       Padding="15"
                       CornerRadius="12"
                       HasShadow="True">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Категория" 
                               FontSize="16" 
                               FontAttributes="Bold"/>
                        <Picker Title="Выберите категорию"
                                ItemsSource="{Binding AvailableCategories}"
                                SelectedItem="{Binding SelectedCategory}"
                                BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#3C3C3E}"
                                TextColor="{AppThemeBinding Light=Black, Dark=White}"
                                HeightRequest="45"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Дата -->
                <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#2C2C2E}"
                       Padding="15"
                       CornerRadius="12"
                       HasShadow="True">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Дата события" 
                               FontSize="16" 
                               FontAttributes="Bold"/>
                        <DatePicker Date="{Binding SelectedDate}"
                                    BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#3C3C3E}"
                                    HeightRequest="45"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Кнопки действий -->
                <Grid ColumnDefinitions="*,*" 
                      ColumnSpacing="15"
                      Margin="0,20">

                    <Button Grid.Column="0"
                            Text="Сбросить всё"
                            Command="{Binding ResetFiltersCommand}"
                            BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#444}"
                            TextColor="{AppThemeBinding Light=Black, Dark=White}"
                            HeightRequest="50"
                            CornerRadius="12"
                            FontSize="16"/>

                    <Button Grid.Column="1"
                            Text="Применить"
                            Command="{Binding ApplyFiltersCommand}"
                            BackgroundColor="#512BD4"
                            TextColor="White"
                            HeightRequest="50"
                            CornerRadius="12"
                            FontSize="16"
                            FontAttributes="Bold"/>
                </Grid>

            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>