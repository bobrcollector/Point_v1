<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Point_v1.Views.EventDetailsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ðµ">

    <ScrollView>
        <Grid RowDefinitions="Auto,*,Auto" RowSpacing="0">

            <!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ -->
            <Frame Grid.Row="0" 
                   Margin="15" 
                   Padding="20" 
                   CornerRadius="15" 
                   HasShadow="True"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}">

                <VerticalStackLayout Spacing="15">

                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¸ Ð´Ð°Ñ‚Ð° -->
                    <Label Text="{Binding Event.Title}" 
                           FontSize="22" 
                           FontAttributes="Bold"
                           LineBreakMode="WordWrap"/>

                    <Frame BackgroundColor="{StaticResource Secondary}"
                           Padding="10,5"
                           CornerRadius="8"
                           HasShadow="False"
                           HorizontalOptions="Start">
                        <Label Text="{Binding Event.CategoryId}" 
                               FontSize="12"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}"/>
                    </Frame>

                    <!-- Ð”Ð°Ñ‚Ð° Ð¸ Ð²Ñ€ÐµÐ¼Ñ -->
                    <Grid ColumnDefinitions="Auto,*">
                        <Label Grid.Column="0" Text="ðŸ“…" FontSize="16"/>
                        <Label Grid.Column="1" 
                               Text="{Binding Event.EventDate, StringFormat='{0:dd.MM.yyyy HH:mm}'}" 
                               FontSize="16"
                               Margin="10,0,0,0"/>
                    </Grid>

                    <!-- ÐœÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ -->
                    <Grid ColumnDefinitions="Auto,*">
                        <Label Grid.Column="0" Text="ðŸ“" FontSize="16"/>
                        <Label Grid.Column="1" 
                               Text="{Binding Event.Address}" 
                               FontSize="16"
                               LineBreakMode="WordWrap"
                               Margin="10,0,0,0"/>
                    </Grid>

                    <!-- Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸ -->
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <Label Grid.Column="0" Text="ðŸ‘¥" FontSize="16"/>
                        <Label Grid.Column="1" 
                               Text="{Binding ParticipantsCount, StringFormat='{0} ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²'}" 
                               FontSize="16"
                               Margin="10,0,0,0"/>
                        <Label Grid.Column="2" 
                               Text="{Binding IsParticipating, Converter={x:Static converters:InverseBoolConverter}, ConverterParameter='Ð’Ñ‹ ÑƒÑ‡Ð°ÑÑ‚Ð²ÑƒÐµÑ‚Ðµ'}" 
                               FontSize="14"
                               TextColor="{StaticResource Primary}"
                               FontAttributes="Bold"
                               IsVisible="{Binding IsAuthenticated}"/>
                    </Grid>

                </VerticalStackLayout>
            </Frame>

            <!-- ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ -->
            <Frame Grid.Row="1" 
                   Margin="15,0,15,15" 
                   Padding="20" 
                   CornerRadius="15" 
                   HasShadow="True"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}">

                <VerticalStackLayout Spacing="10">
                    <Label Text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ" 
                           FontSize="18" 
                           FontAttributes="Bold"/>

                    <Label Text="{Binding Event.Description}" 
                           FontSize="16"
                           LineBreakMode="WordWrap"/>
                </VerticalStackLayout>
            </Frame>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
            <Grid Grid.Row="2" 
                  ColumnDefinitions="*,*" 
                  ColumnSpacing="10" 
                  Padding="15"
                  BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#000000}">

                <!-- Ð”Ð»Ñ Ð³Ð¾ÑÑ‚ÐµÐ¹ -->
                <Button Grid.Column="0" 
                        Grid.ColumnSpan="2"
                        Text="Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÑ‡Ð°ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ"
                        Command="{Binding GoToLoginCommand}"
                        BackgroundColor="{StaticResource Primary}"
                        IsVisible="{Binding IsGuestMode}"/>

                <!-- Ð”Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… -->
                <Button Grid.Column="0" 
                        Text="{Binding ParticipationButtonText}"
                        Command="{Binding ToggleParticipationCommand}"
                        BackgroundColor="{Binding ParticipationButtonColor}"
                        IsVisible="{Binding IsAuthenticated}"/>

                <Button Grid.Column="1" 
                        Text="Ð§Ð°Ñ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ"
                        Command="{Binding OpenChatCommand}"
                        BackgroundColor="{StaticResource Secondary}"
                        TextColor="{StaticResource Primary}"
                        IsVisible="{Binding IsAuthenticated}"/>
            </Grid>

        </Grid>
    </ScrollView>
</ContentPage>