<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Point_v1.Views.RegisterPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:Point_v1.Converters"
             Title="Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}">

    <ContentPage.Resources>
        <converters:PasswordLengthToColorConverter x:Key="PasswordLengthToColorConverter" />
        <converters:PasswordMatchConverter x:Key="PasswordMatchConverter" />
        <converters:PasswordMatchTextConverter x:Key="PasswordMatchTextConverter" />
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Spacing="0" VerticalOptions="Start" Padding="30">

            <!-- Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <VerticalStackLayout Spacing="15" Margin="0,40,0,40" HorizontalOptions="Center">
                <Label Text="ðŸš€" 
                       FontSize="48"
                       HorizontalOptions="Center"/>

                <Label Text="ÐŸÑ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½ÑÐ¹Ñ‚ÐµÑÑŒ!" 
                       Style="{StaticResource Heading1}"
                       HorizontalOptions="Center"
                       Margin="0"/>

                <Label Text="Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚" 
                       FontSize="16" 
                       TextColor="{AppThemeBinding Light=Gray, Dark=#A0A0A0}"
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>

            <!-- Ð¤Ð¾Ñ€Ð¼Ð° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ -->
            <VerticalStackLayout Spacing="16">

                <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ -->
                <Label Text="{Binding SuccessMessage}" 
                       IsVisible="{Binding SuccessMessage, Converter={converters:IsNotNullOrEmptyConverter}}"
                       TextColor="#2E7D32" 
                       FontSize="14"
                       HorizontalOptions="Center"
                       Padding="15,10"
                       HorizontalTextAlignment="Center"/>

                <Label Text="{Binding ErrorMessage}" 
                       IsVisible="{Binding ErrorMessage, Converter={converters:IsNotNullOrEmptyConverter}}"
                       TextColor="#D32F2F" 
                       FontSize="14"
                       HorizontalOptions="Center"
                       Padding="15,10"
                       HorizontalTextAlignment="Center"/>

                <!-- Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ" 
                           Style="{StaticResource FormLabel}"/>
                    <Entry Placeholder="ÐŸÑ€Ð¸Ð´ÑƒÐ¼Ð°Ð¹Ñ‚Ðµ Ð¸Ð¼Ñ" 
                           Text="{Binding DisplayName}"/>
                </VerticalStackLayout>

                <!-- Email -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Email" 
                           Style="{StaticResource FormLabel}"/>
                    <Entry Placeholder="your@email.com" 
                           Text="{Binding Email}"
                           Keyboard="Email"/>
                </VerticalStackLayout>

                <!-- ÐŸÐ°Ñ€Ð¾Ð»ÑŒ -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ" 
                           Style="{StaticResource FormLabel}"/>
                    <Entry Placeholder="ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 6 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²" 
                           Text="{Binding Password}"
                           IsPassword="True"/>

                    <!-- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¿Ð°Ñ€Ð¾Ð»Ñ -->
                    <Label Text="{Binding PasswordValidationMessage}" 
                           FontSize="12" 
                           TextColor="{Binding PasswordValidationColor}"
                           IsVisible="{Binding Password, Converter={converters:IsNotNullOrEmptyConverter}}"/>
                </VerticalStackLayout>

                <!-- ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ñ -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ" 
                           Style="{StaticResource FormLabel}"/>
                    <Entry Placeholder="ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ" 
                           Text="{Binding ConfirmPassword}"
                           IsPassword="True"/>

                    <!-- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¿Ð°Ñ€Ð¾Ð»Ñ -->
                    <Label Text="{Binding ConfirmPasswordValidationMessage}" 
                           FontSize="12" 
                           TextColor="{Binding PasswordsMatch, Converter={StaticResource BoolToColorConverter}}"
                           IsVisible="{Binding ConfirmPassword, Converter={converters:IsNotNullOrEmptyConverter}}"/>
                </VerticalStackLayout>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ -->
                <Button Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚" 
                        Command="{Binding RegisterCommand}"
                        Margin="0,12,0,0"/>

                <!-- Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ -->
                <Grid VerticalOptions="Center" Margin="0,16">
                    <BoxView HeightRequest="1" 
                             BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#444}"/>
                    <Label Text="Ð¸Ð»Ð¸" 
                           BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
                           Padding="10,0"
                           FontSize="14"
                           TextColor="Gray"
                           HorizontalOptions="Center"/>
                </Grid>

                <!-- ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ ÐºÐ¾ Ð²Ñ…Ð¾Ð´Ñƒ -->
                <Button Text="Ð’Ð¾Ð¹Ñ‚Ð¸ Ð² Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚" 
                        Command="{Binding GoToLoginPageCommand}"
                        Style="{StaticResource SecondaryButton}"/>

            </VerticalStackLayout>

            <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
            <ActivityIndicator IsVisible="{Binding IsBusy}" 
                             IsRunning="{Binding IsBusy}"
                             Color="#512BD4"
                             HorizontalOptions="Center"
                             VerticalOptions="End"
                             HeightRequest="50"
                             Margin="0,30,0,0"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>